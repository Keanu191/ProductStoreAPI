@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1 class="display-4">Products</h1>
    <p>MVC Assignment 2 - By Keanu Farro 2024</p>
</div>

<ul id="products-list"></ul>

@section Scripts {
    <script>
        let url = "https://localhost:7283/api/v1/products/Public"
        

        window.onload = async () => {
            fetch(url)
                .then(response => response.json())
                .then(data => showProducts(data))
                .catch(ex => {
                    alert("error ")
                    console.error(ex);
                });
        };

            function showProducts(products) {
                let productsList = document.getElementById("products-list");
                products.forEach(product => {
                    let li = document.createElement("li");
                    let text = `${product.name} ($${product.price})`;
                    li.append(document.createTextNode(text));
                    productsList.appendChild(li);
                });
        };
    </script>
}

